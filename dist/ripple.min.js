/*
legitRipple.js v1.0.0, Copyright by Matthias Vogt (ISC license)
ripple.min.js, compiled: 31/10/2015 @ 23:13:54
*/
!function(t){t.fn.ripple=function(e){if(this.length>1)return this.each(function(n,i){t(i).ripple(e)});if(this.off(".ripple").data("unbound",!0),e&&e.unbind)return this;var n,i,o,a=function(t){return!!t.type.match(/^touch/)},r=function(t,e){return a(t)&&(t=s(t.originalEvent.touches,e)),[t.pageX,t.pageY]},s=function(e,n){return t.makeArray(e).filter(function(t,e){return t.identifier==n})[0]},p=0,l=function(t){"touchstart"==t.type&&(p=3),"scroll"==t.type&&(p=0);var e=p&&!a(t);return e&&p--,!e};this.addClass("legitRipple").removeData("unbound").on("mousedown.ripple touchstart.ripple",function(e){l(e)&&!n&&(n=t(this),o=a(e)?e.originalEvent.changedTouches[0].identifier:-1,g(r(e,o)))}).on("dragstart.ripple",function(t){c.allowDragging||t.preventDefault()}),t(document).on("mousemove.ripple touchmove.ripple",function(t){l(t)&&n&&!n.data("unbound")&&(a(t)?s(t.originalEvent.changedTouches,o):!~o)&&m(r(t,o))}).on("mouseup.ripple touchend.ripple touchcancel.ripple",function(t){l(t)&&n&&!n.data("unbound")&&(a(t)?s(t.originalEvent.changedTouches,o):!~o)&&v()}).on("contextmenu.ripple",function(t){l(t)}),t(window).on("scroll.ripple",function(t){l(t),n&&!n.data("unbound")&&v()});var c,u,d,f,h=function(){var i={dragging:!0,adaptPos:function(){return c.dragging},maxDiameter:function(){return Math.sqrt(Math.pow(u[0],2)+Math.pow(u[1],2))/n.outerWidth()*(c.adaptPos?100:200)+1+"%"},scaleMode:"fixed",hasCustomRipple:!1,allowDragging:!1,callback:null};e=e||{},t.each(i,function(t,n){c[t]=e.hasOwnProperty(t)?e[t]:"function"==typeof n?n():n})},g=function(e){c={},f=0,u=[n.outerWidth(),n.outerHeight()],h(),d=e,i=t("<span/>"),c.hasCustomRipple&&n.clone().children(".legitRipple-custom").last().removeClass("legitRipple-custom").appendTo(i),i.addClass("legitRipple-ripple").appendTo(n),w(e,!1);var o=i.css("transition-duration").split(",");i.css("transition-duration",[5.5*parseFloat(o)+"s"].concat(o.slice(1)).join(",")).css("width",c.maxDiameter)},m=function(t){var e;if(f++,"proportional"==c.scaleMode){var n=Math.pow(f,f/100*5);e=n>40?40:n}else if("fixed"==c.scaleMode&&Math.abs(t[1]-d[1])>6)return void v();w(t,e)},v=function(){i.css("width",i.css("width")).css("transition","none").css("transition","").css("width",i.css("width")).css("width",c.maxDiameter).css("opacity","0"),n=null,i.on("transitionend webkitTransitionEnd oTransitionEnd",function(){t(this).data("firstEnded")?t(this).off().remove():t(this).data("firstEnded",!0)})},w=function(e,o){var a=[],r=[(e[0]-n.offset().left)/u[0],(e[1]-n.offset().top)/u[1]],s=[.5-r[0],.5-r[1]],p=[100/parseFloat(c.maxDiameter),100/parseFloat(c.maxDiameter)*(u[1]/u[0])],l=[s[0]*p[0],s[1]*p[1]],d=c.dragging||0===f;if(d&&"inline"==n.css("display")){var h=t("<span/>").text("Hi!").css("font-size",0).prependTo(n),g=h.offset().left;h.remove(),a=[e[0]-g+"px",e[1]-n.offset().top+"px"]}d&&(a=[a[0]||100*r[0]+"%",a[1]||100*r[1]+"%"],i.css("left",a[0]).css("top",a[1])),i.css("transform","translate3d(-50%, -50%, 0)"+(c.adaptPos?"translate3d("+100*l[0]+"%, "+100*l[1]+"%, 0)":"")+(o?"scale("+o+")":"")),c.callback&&c.callback(n,i,r,c.maxDiameter)};return this},t.ripple=function(e){t.each(e,function(e,n){t(e).ripple(n)})},t.ripple.destroy=function(){t(".legitRipple").removeClass("legitRipple").add(window).add(document).off(".ripple"),t(".legitRipple-ripple").remove()}}(jQuery);