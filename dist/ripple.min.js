/*
legitRipple.js 1.0.0 (ISC license)
ripple.min.js, compiled: 7/10/2015 @ 21:27:00
*/
!function(t){function e(t){var e=t.changedTouches[0],n=document.createEvent("MouseEvent");n.initMouseEvent({touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup"}[t.type],!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(n),t.preventDefault()}function n(){document.addEventListener("touchstart",e,!0),document.addEventListener("touchmove",e,!0),document.addEventListener("touchend",e,!0),document.addEventListener("touchcancel",e,!0)}t.fn.ripple=function(e,o){e=e||{};var s,i,a,r,c,u,d,l=this,p=20,f=function(e){console.log("touch",[e.pageX,e.pageY]),s={},r=0,c=[i.outerWidth(),i.outerHeight()],v(),a=[e.pageX,e.pageY],u=t("<span/>"),s.hasCustomRipple&&i.clone().children(".legitRipple-custom").last().removeClass("legitRipple-custom").appendTo(u),u.addClass("legitRipple-ripple").appendTo(i),g(a[0],a[1],!1),d=u.css("transition");var n=u.css("transition-duration").split(",");u.css("transition-duration",[7*parseFloat(n)+"s"].concat(n.slice(1)).join(",")).css("width",s.maxDiameter)},m=function(t){var e;if(r++,"proportional"==s.scaleMode){var n=Math.pow(r,r/100*5);e=n>40?40:n}else if("fixed"==s.scaleMode){var o=Math.sqrt(Math.pow(t.pageY-a[1],2));if(o>6)return void h()}g(t.pageX,t.pageY,e)},h=function(){console.log("release"),u.css("transition","all 0s linear 0s").css("width",u.css("width")).css("transition",d),setTimeout(function(){u.css("width",s.maxDiameter).css("opacity","0")},p),u.on("transitionend webkitTransitionEnd oTransitionEnd",function(){t(this).data("firstTransitionEnded")?t(this).off().remove():t(this).data("firstTransitionEnded",!0)}),i=null},g=function(e,n,a){var d=[],l=[],p=[(e-i.offset().left)/c[0],(n-i.offset().top)/c[1]],f=[.5-p[0],.5-p[1]],m=[100/parseFloat(s.maxDiameter),100/parseFloat(s.maxDiameter)*(c[1]/c[0])],h=[f[0]*m[0],f[1]*m[1]],g=s.dragging||0===r;if(g&&"inline"==i.css("display")){var v=t("<span/>").text("Hi!").css("font-size",0).prependTo(i),w=v.offset().left;v.remove(),d[0]=e-w+"px",console.log(e,w,d[0])}else s.adaptPos&&(l=[100*h[0]+"%",100*h[1]+"%"]);o&&o(i,u,p,parseFloat(s.maxDiameter)/100),g&&(d=[d[0]||100*p[0]+"%",100*p[1]+"%"],u.css("left",d[0]).css("top",d[1])),u.css("transform","translate3d(-50%, -50%, 0)"+(s.adaptPos?"translate3d("+l[0]+", "+l[1]+", 0)":"")+(a?"scale("+a+")":""))},v=function(){var n={dragging:function(){return!0},adaptPos:function(){return s.dragging},maxDiameter:function(){return Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],2))/i.outerWidth()*(s.adaptPos?100:200)+1+"%"},scaleMode:function(){return"fixed"},hasCustomRipple:function(){return!1}};t.each(n,function(t,n){s[t]=e.hasOwnProperty(t)?e[t]:n()}),console.log("passed options:",e),console.log("rendered options:",s)};t(function(){n(),l.addClass("legitRipple");var e=l.filter(function(e){return"inline"===t(this).css("display")}).css("display","inline-block");setTimeout(function(){e.css("display","inline").css("display","")},0)}),l.mousedown(function(e){i=t(this),f(e)}),t(document).mousemove(function(t){i&&m(t)}),t(document).mouseup(function(t){i&&1==t.which&&h()}),t(window).scroll(function(){i&&h()}),l.on("dragstart",function(t){t.preventDefault()})}}(jQuery);