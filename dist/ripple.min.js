/*
legitRipple.js v1.0.0, Copyright by Matthias Vogt (ISC license)
ripple.min.js, compiled: 8/11/2015 @ 23:52:40
*/
!function(t){t.fn.ripple=function(e){if(this.length>1)return this.each(function(n,i){t(i).ripple(e)});if(this.off(".ripple").data("unbound",!0),e&&e.unbind)return this;var n,i,o,a=function(t){return!!t.type.match(/^touch/)},r=function(t,e){return a(t)&&(t=s(t.originalEvent.touches,e)),[t.pageX,t.pageY]},s=function(e,n){return t.makeArray(e).filter(function(t,e){return t.identifier==n})[0]},p=0,l=function(t){"touchstart"==t.type&&(p=3),"scroll"==t.type&&(p=0);var e=p&&!a(t);return e&&p--,!e};this.addClass("legitRipple").removeData("unbound").on("mousedown.ripple touchstart.ripple",function(e){l(e)&&!n&&(n=t(this),o=a(e)?e.originalEvent.changedTouches[0].identifier:-1,m(r(e,o)))}).on("dragstart.ripple",function(t){d.allowDragging||t.preventDefault()}),t(document).on("mousemove.ripple touchmove.ripple",function(t){l(t)&&n&&!n.data("unbound")&&(a(t)?s(t.originalEvent.changedTouches,o):!~o)&&g(r(t,o))}).on("mouseup.ripple touchend.ripple touchcancel.ripple",function(t){l(t)&&n&&!n.data("unbound")&&(a(t)?s(t.originalEvent.changedTouches,o):!~o)&&v()}).on("contextmenu.ripple",function(t){l(t)}),t(window).on("scroll.ripple",function(t){l(t),n&&!n.data("unbound")&&v()});var c,u,d={},f=0,h=function(){var i={fixedPos:null,dragging:function(){return!d.fixedPos},adaptPos:function(){return d.dragging},maxDiameter:function(){return Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],2))/n.outerWidth()*(d.adaptPos?100:200)+1+"%"},scaleMode:"fixed",template:!1,allowDragging:!1,callback:null};e=e||{},t.each(i,function(t,n){d[t]=e.hasOwnProperty(t)?e[t]:"function"==typeof n?n():n})},m=function(e){c=[n.outerWidth(),n.outerHeight()],h(),u=e,i=t("<span/>"),d.template&&i.append(("object"==typeof d.template?d.template:n.children(".legitRipple-template").last()).clone().removeClass("legitRipple-template")).addClass("legitRipple-custom"),i.addClass("legitRipple-ripple").appendTo(n),w(e,!1);var o=i.css("transition-duration").split(",");i.css("transition-duration",[5.5*parseFloat(o)+"s"].concat(o.slice(1)).join(",")).css("width",d.maxDiameter)},g=function(t){var e;if(f++,"proportional"==d.scaleMode){var n=Math.pow(f,f/100*5);e=n>40?40:n}else if("fixed"==d.scaleMode&&Math.abs(t[1]-u[1])>6)return void v();w(t,e)},v=function(){i.css("width",i.css("width")).css("transition","none").css("transition","").css("width",i.css("width")).css("width",d.maxDiameter).css("opacity","0"),n=null,i.on("transitionend webkitTransitionEnd oTransitionEnd",function(){t(this).data("oneEnded")?t(this).off().remove():t(this).data("oneEnded",!0)})},w=function(e,o){var a=[],r=d.fixedPos||[(e[0]-n.offset().left)/c[0],(e[1]-n.offset().top)/c[1]],s=[.5-r[0],.5-r[1]],p=[100/parseFloat(d.maxDiameter),100/parseFloat(d.maxDiameter)*(c[1]/c[0])],l=[s[0]*p[0],s[1]*p[1]],u=d.dragging||0===f;if(u&&"inline"==n.css("display")){var h=t("<span/>").text("Hi!").css("font-size",0).prependTo(n),m=h.offset().left;h.remove(),a=[e[0]-m+"px",e[1]-n.offset().top+"px"]}u&&(a=[a[0]||100*r[0]+"%",a[1]||100*r[1]+"%"],i.css("left",a[0]).css("top",a[1])),i.css("transform","translate3d(-50%, -50%, 0)"+(d.adaptPos?"translate3d("+100*l[0]+"%, "+100*l[1]+"%, 0)":"")+(o?"scale("+o+")":"")),d.callback&&d.callback(n,i,r,d.maxDiameter)};return this},t.ripple=function(e){t.each(e,function(e,n){t(e).ripple(n)})},t.ripple.destroy=function(){t(".legitRipple").removeClass("legitRipple").add(window).add(document).off(".ripple"),t(".legitRipple-ripple").remove()}}(jQuery);