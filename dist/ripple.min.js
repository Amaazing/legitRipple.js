/*
realRipple.js 1.0.0 (ISC license)
ripple.min.js, compiled: 7/10/2015 @ 18:24:04
*/
!function(t){function e(t){var e=t.changedTouches[0],n=document.createEvent("MouseEvent");n.initMouseEvent({touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup"}[t.type],!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(n),t.preventDefault()}function n(){document.addEventListener("touchstart",e,!0),document.addEventListener("touchmove",e,!0),document.addEventListener("touchend",e,!0),document.addEventListener("touchcancel",e,!0)}t.fn.ripple=function(e,o){e=e||{};var s,i,a,r,c,l,u,d=this,p=20,f=function(e){console.log("touch",[e.pageX,e.pageY]),s={},r=0,c=[i.outerWidth(),i.outerHeight()],g(),a=[e.pageX,e.pageY],console.log(i.children(".material-ripple-custom").last().clone().wrapAll("</span>").removeClass("material-ripple-custom")),l=t("<span/>"),s.hasCustomRipple&&i.clone().children(".material-ripple-custom").last().removeClass("material-ripple-custom").appendTo(l),l.addClass("material-ripple-ripple").appendTo(i),v(a[0],a[1],!1),u=l.css("transition");var n=l.css("transition-duration").split(",");l.css("transition-duration",[7*parseFloat(n)+"s"].concat(n.slice(1)).join(",")).css("width",s.maxDiameter)},m=function(t){var e;if(r++,"proportional"==s.scaleMode){var n=Math.pow(r,r/100*5);e=n>40?40:n}else if("fixed"==s.scaleMode){var o=Math.sqrt(Math.pow(t.pageY-a[1],2));if(o>6)return void h()}v(t.pageX,t.pageY,e)},h=function(){console.log("release"),l.css("transition","all 0s linear 0s").css("width",l.css("width")).css("transition",u),setTimeout(function(){l.css("width",s.maxDiameter).css("opacity","0")},p),l.on("transitionend webkitTransitionEnd oTransitionEnd",function(){t(this).data("firstTransitionEnded")?t(this).off().remove():t(this).data("firstTransitionEnded",!0)}),i=null},v=function(e,n,a){var u=[],d=[],p=[(e-i.offset().left)/c[0],(n-i.offset().top)/c[1]],f=[.5-p[0],.5-p[1]],m=[100/parseFloat(s.maxDiameter),100/parseFloat(s.maxDiameter)*(c[1]/c[0])],h=[f[0]*m[0],f[1]*m[1]],v=s.dragging||0===r;if(v&&"inline"==i.css("display")){var g=t("<span/>").text("Hi!").css("font-size",0).prependTo(i),w=g.offset().left;g.remove(),u[0]=e-w+"px",console.log(e,w,u[0])}else s.adaptPos&&(d=[100*h[0]+"%",100*h[1]+"%"]);o&&o(i,l,p,s.maxDiameter),v&&(u=[u[0]||100*p[0]+"%",100*p[1]+"%"],l.css("left",u[0]).css("top",u[1])),l.css("transform","translate3d(-50%, -50%, 0)"+(s.adaptPos?"translate3d("+d[0]+", "+d[1]+", 0)":"")+(a?"scale("+a+")":""))},g=function(){var n={dragging:function(){return!0},adaptPos:function(){return s.dragging},maxDiameter:function(){return Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],2))/i.outerWidth()*(s.adaptPos?100:200)+1+"%"},scaleMode:function(){return"fixed"},hasCustomRipple:function(){return!1}};t.each(n,function(t,n){s[t]=e.hasOwnProperty(t)?e[t]:n()}),console.log("passed options:",e),console.log("rendered options:",s)};t(function(){n(),d.addClass("material-ripple");var e=d.filter(function(e){return"inline"===t(this).css("display")}).css("display","inline-block");setTimeout(function(){e.css("display","inline").css("display","")},0)}),d.mousedown(function(e){i=t(this),f(e)}),t(document).mousemove(function(t){i&&m(t)}),t(document).mouseup(function(t){i&&1==t.which&&h()}),t(window).scroll(function(){i&&h()}),d.on("dragstart",function(t){t.preventDefault()})}}(jQuery);