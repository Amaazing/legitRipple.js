/*
legitRipple.js v1.0.0, Copyright by Matthias Vogt (ISC license)
ripple.min.js, compiled: 18/10/2015 @ 3:22:43
*/
!function(t){t.fn.ripple=function(n){if(this.length>1)return this.each(function(e,i){t(i).ripple(n)});if(this.off(".ripple").data("unbound",!0),n&&n.unbind)return this;var e,i,o,a=function(t){return t.type.startsWith("touch")},r=function(t,n){return a(t)&&(t=t.originalEvent.touches[n]),[t.pageX,t.pageY]},s=function(n,e){var i;return t.each(n.originalEvent.changedTouches,function(t,n){n.identifier==e&&(i=n)}),i},p=0,c=function(t){"touchstart"==t.type&&(p=3);var n=p&&!a(t);return n&&p--,!n};this.addClass("legitRipple").removeData("unbound").on("mousedown.ripple touchstart.ripple",function(n){c(n)&&!e&&(e=t(this),o=a(n)?n.originalEvent.changedTouches[0].identifier:-1,g(r(n,o)))}).on("dragstart.ripple",function(t){l.allowDragging||t.preventDefault()}),t(document).on("mousemove.ripple touchmove.ripple",function(t){c(t)&&e&&!e.data("unbound")&&(a(t)?s(t,o):-1==o)&&m(r(t,o))}).on("mouseup.ripple touchend.ripple touchcancel.ripple",function(t){c(t)&&e&&!e.data("unbound")&&(a(t)?s(t,o):-1==o)&&v()}).on("contextmenu.ripple",function(t){c(t)}),t(window).on("scroll.ripple",function(){p=0,e&&!e.data("unbound")&&v()});var l,u,d,f,h=function(){var i={dragging:!0,adaptPos:function(){return l.dragging},maxDiameter:function(){return Math.sqrt(Math.pow(u[0],2)+Math.pow(u[1],2))/e.outerWidth()*(l.adaptPos?100:200)+1+"%"},scaleMode:"fixed",hasCustomRipple:!1,allowDragging:!1,callback:null};n=n||{},t.each(i,function(t,e){l[t]=n.hasOwnProperty(t)?n[t]:"function"==typeof e?e():e})},g=function(n){l={},f=0,u=[e.outerWidth(),e.outerHeight()],h(),d=n,i=t("<span/>"),l.hasCustomRipple&&e.clone().children(".legitRipple-custom").last().removeClass("legitRipple-custom").appendTo(i),i.addClass("legitRipple-ripple").appendTo(e),w(n,!1);var o=i.css("transition-duration").split(",");i.css("transition-duration",[5.5*parseFloat(o)+"s"].concat(o.slice(1)).join(",")).css("width",l.maxDiameter)},m=function(t){var n;if(f++,"proportional"==l.scaleMode){var e=Math.pow(f,f/100*5);n=e>40?40:e}else if("fixed"==l.scaleMode&&Math.abs(t[1]-d[1])>6)return void v();w(t,n)},v=function(){i.css("width",i.css("width")).css("transition","none").css("transition","").css("width",i.css("width")).css("width",l.maxDiameter).css("opacity","0"),e=null,i.on("transitionend webkitTransitionEnd oTransitionEnd",function(){t(this).data("firstEnded")?t(this).off().remove():t(this).data("firstEnded",!0)})},w=function(n,o){var a=[],r=[(n[0]-e.offset().left)/u[0],(n[1]-e.offset().top)/u[1]],s=[.5-r[0],.5-r[1]],p=[100/parseFloat(l.maxDiameter),100/parseFloat(l.maxDiameter)*(u[1]/u[0])],c=[s[0]*p[0],s[1]*p[1]],d=l.dragging||0===f;if(d&&"inline"==e.css("display")){var h=t("<span/>").text("Hi!").css("font-size",0).prependTo(e),g=h.offset().left;h.remove(),a=[n[0]-g+"px",n[1]-e.offset().top+"px"]}d&&(a=[a[0]||100*r[0]+"%",a[1]||100*r[1]+"%"],i.css("left",a[0]).css("top",a[1])),i.css("transform","translate3d(-50%, -50%, 0)"+(l.adaptPos?"translate3d("+100*c[0]+"%, "+100*c[1]+"%, 0)":"")+(o?"scale("+o+")":"")),l.callback&&l.callback(e,i,r,l.maxDiameter)};return this},t.ripple=function(n){t.each(n,function(n,e){t(n).ripple(e)})},t.ripple.destroy=function(){t(".legitRipple").removeClass("legitRipple").add(window).add(document).off(".ripple"),t(".legitRipple-ripple").remove()}}(jQuery);